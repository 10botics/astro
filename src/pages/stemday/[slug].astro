---
// Dynamic route to handle English URLs while using Chinese-named components
import { getStaticPathsForFolder, getComponentForSlug } from '../../utils/urlAliases.js';

// Pre-import all components to avoid Unicode issues in dynamic imports
import StrawBridge from './飲管橋.astro';
import DIYHandcraft from './DIY 手作.astro';
import MatatalbProgramming from './Matatalab 入門編程課程.astro';

// Component mapping
const componentMap = {
  '飲管橋.astro': StrawBridge,
  'DIY 手作.astro': DIYHandcraft,
  'Matatalab 入門編程課程.astro': MatatalbProgramming
};

export async function getStaticPaths() {
  return getStaticPathsForFolder('stemday');
}

const { slug } = Astro.params;

// Get component info from global alias configuration
const componentInfo = getComponentForSlug('stemday', slug);

if (!componentInfo) {
  throw new Error(`Unknown slug: ${slug}`);
}

// Get the pre-imported component
const ChineseComponent = componentMap[componentInfo.filename];

if (!ChineseComponent) {
  throw new Error(`Component not found for filename: ${componentInfo.filename}`);
}
---

<ChineseComponent /> 