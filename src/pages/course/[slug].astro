---
// Redirect handler for /course/xxx URLs to /school-courses/xxx
import { getStaticPathsForFolder, getComponentForSlug } from '../../utils/urlAliases.js';

export async function getStaticPaths() {
  return getStaticPathsForFolder('course');
}

const { slug } = Astro.params;

// Get component info from global alias configuration
const componentInfo = getComponentForSlug('course', slug);

if (!componentInfo) {
  // Fallback: redirect to school-courses with same slug
  return Astro.redirect(`/school-courses/${slug}`);
}

if (componentInfo.isRedirect && componentInfo.redirect) {
  // Perform the redirect
  return Astro.redirect(componentInfo.redirect);
} else {
  // Fallback: redirect to school-courses with same slug
  return Astro.redirect(`/school-courses/${slug}`);
}
---

<!-- This file should never render content as it only handles redirects -->