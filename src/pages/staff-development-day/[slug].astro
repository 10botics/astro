---
// Dynamic route to handle English URLs while using Chinese-named components

// Pre-import all components to avoid Unicode issues in dynamic imports
import StaffDevIndex from './index.astro';

// Component mapping by filename
const componentMap = {
  'index.astro': StaffDevIndex
};

export async function getStaticPaths() {
  // Canonical slug to filename mapping (staff-development-day)
  const slugToFilenameMap = {
    'staff-development-day': 'index.astro'
  };
  return Object.keys(slugToFilenameMap).map(slug => ({
    params: { slug }
  }));
}

const { slug } = Astro.params;

if (!slug) {
  throw new Error('Slug is required');
}

// Get filename from canonical slug mapping
const slugToFilenameMap = {
  'staff-development-day': 'index.astro'
};
const filename = slugToFilenameMap[slug];

if (!filename) {
  throw new Error(`Unknown slug: ${slug}`);
}

// Get the pre-imported component
const Component = filename in componentMap 
  ? componentMap[filename as keyof typeof componentMap]
  : null;

if (!Component) {
  throw new Error(`Component not found for filename: ${filename}`);
}
---

<Component /> 